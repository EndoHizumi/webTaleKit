# シナリオの編集

シナリオファイル（`.scene`ファイル）をテキストエディタで開いて、ゲームの内容を変更できます。

## シナリオファイルの構造

シナリオファイルは2つのセクションで構成されています：

```html
<scenario>
  <!-- ゲームの進行を記述 -->
</scenario>

<script>
  // 設定や変数を定義
</script>
```

### scenarioセクション

WebTaleScript（WTS）というマークアップ言語でゲームの進行を記述します。

### scriptセクション

JavaScriptでシーンの設定や変数を定義します。

## 基本的な要素の編集

### セリフを変更する

既存のセリフを変更するには、`<say>` タグの中身を書き換えます：

```html
<!-- 変更前 -->
<say name="燈火">「先輩、別れてください」</say>

<!-- 変更後 -->
<say name="燈火">「先輩、お疲れ様です」</say>
```

### 地の文を変更する

地の文（ナレーション）は `<text>` タグを使うか、タグなしで記述できます：

```html
<!-- パターン1: textタグを使う -->
<text>夏の陽気が残る９月の初旬</text>

<!-- パターン2: タグなしで記述 -->
夏の陽気が残る９月の初旬
```

### キャラクター名を変更する

`name` 属性でキャラクター名を指定できます：

```html
<say name="智樹">「え、ごめん。今･･･なんて」</say>
```

## 要素の追加

### セリフを追加する

新しいセリフを追加するには、`<say>` タグを追加します：

```html
<say name="燈火">「先輩、別れてください」</say>
<say name="智樹">「え、ごめん。今･･･なんて」</say>
<!-- 新しいセリフを追加 -->
<say name="燈火">「もう一度言いますね」</say>
```

### 地の文を追加する

```html
夏の陽気が残る９月の初旬
<!-- 新しい地の文を追加 -->
突然、彼女は立ち止まった。
```

### キャラクターを表示する

`<show>` タグでキャラクターを画面に表示できます：

```html
<show path="chara/guide.png" name="ガイド" left="100" top="200" />
```

::: tip
既存のシーンを参考にして、同じような構造で追加していくとわかりやすいです。
:::

## シーンの設定

`<script>` セクションで、シーンの背景やBGMを設定できます：

```javascript
const sceneConfig = {
  background: '屋上.jpg',      // 背景画像
  bgm: 'title_theme.mp3',      // BGM
  name: 'プロローグ'           // シーン名
}
```

### 設定項目

- **background**: 背景画像のファイル名
- **bgm**: BGMのファイル名
- **name**: シーンの名前（デバッグ時に便利）
- **template**: 使用するUIテンプレート（通常は省略可）

## 改行とクリック待ち

### 改行する

テキスト内で改行したい場合は、`<br/>` タグを使います：

```html
<text>
  夏の陽気が残る９月の初旬<br/>
  そんな日に、彼女は言った。
</text>
```

### ページをクリアする

新しいページを始める場合は `<newpage>` タグを使います：

```html
<text>前のテキスト</text>
<newpage />
<text>新しいページのテキスト</text>
```

## 変数を使う

変数を定義して、テキスト内で使用できます：

```html
<scenario>
  <text>{{playerName}}は目を覚ました。</text>
</scenario>

<script>
const playerName = "太郎";
</script>
```

変数は `{{変数名}}` の形式で参照できます（mustache記法）。

## 初心者へのアドバイス

::: tip 段階的に学ぶ
まずは既存のテキストを変更することから始めましょう。慣れてきたら、新しい要素を追加したり、変数を使ったりしてみてください。
:::

## 次のステップ

- [選択肢の追加](/guide/tutorial-choices) - プレイヤーに選択させる
- [APIリファレンス](/api/overview) - 使用できるタグの一覧
- [制御構文](/api/control) - 条件分岐やジャンプなど
